<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src&#x2F;sm-tree&#x2F;js&#x2F;plugins&#x2F;tree-lazy.js - SmugMug YUI Gallery</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.7.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.7.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="SmugMug YUI Gallery"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 3.8.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Plugin.Tree.Lazy.html">Plugin.Tree.Lazy</a></li>
            
                <li><a href="..&#x2F;classes/Tree.html">Tree</a></li>
            
                <li><a href="..&#x2F;classes/Tree.Node.html">Tree.Node</a></li>
            
                <li><a href="..&#x2F;classes/TreeView.html">TreeView</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/gallery-sm-tree.html">gallery-sm-tree</a></li>
            
                <li><a href="..&#x2F;modules/gallery-sm-tree-lazy.html">gallery-sm-tree-lazy</a></li>
            
                <li><a href="..&#x2F;modules/gallery-sm-tree-node.html">gallery-sm-tree-node</a></li>
            
                <li><a href="..&#x2F;modules/gallery-sm-treeview.html">gallery-sm-treeview</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src&#x2F;sm-tree&#x2F;js&#x2F;plugins&#x2F;tree-lazy.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
Provides &#x60;Plugin.Tree.Lazy&#x60;, a plugin for &#x60;Tree&#x60; that makes it easy to lazily
load and populate the contents of tree nodes the first time they&#x27;re opened.

@module gallery-sm-tree
@submodule gallery-sm-tree-lazy
**&#x2F;

&#x2F;**
A plugin for &#x60;Tree&#x60; that makes it easy to lazily load and populate the contents
of tree nodes the first time they&#x27;re opened.

### Example

    YUI().use(&#x27;jsonp&#x27;, &#x27;tree&#x27;, &#x27;tree-lazy&#x27;, function (Y) {
        var tree = new Y.Tree();

        tree.plug(Y.Plugin.Tree.Lazy, {

            &#x2F;&#x2F; Custom function that Plugin.Tree.Lazy will call when it needs to
            &#x2F;&#x2F; load the children for a node.
            load: function (node, callback) {
                &#x2F;&#x2F; Request the data for this node&#x27;s children via JSONP.
                Y.jsonp(&#x27;http:&#x2F;&#x2F;example.com&#x2F;api&#x2F;data?callback={callback}&#x27;, function (data) {
                    &#x2F;&#x2F; If we didn&#x27;t get any data back, treat this as an error.
                    if (!data) {
                        callback(new Error(&#x27;No data!&#x27;));
                        return;
                    }

                    &#x2F;&#x2F; Append the children to the node (assume &#x60;data.children&#x60; is
                    &#x2F;&#x2F; an array of child node data for the sake of this example).
                    node.append(data.children);

                    &#x2F;&#x2F; Call the callback function to tell Plugin.Tree.Lazy that
                    &#x2F;&#x2F; we&#x27;re done loading data.
                    callback();
                });
            }

        });
    });

@class Plugin.Tree.Lazy
@param {Object} config Config object.

    @param {Function} config.load Custom &#x60;load()&#x60; function that will be called
        when a node&#x27;s children need to be loaded. This function must call the
        provided callback to indicate completion.

        @param {Function} config.load.callback Callback function. The custom
            &#x60;load()&#x60; function must call this callback to indicate completion.

            @param {Error} [config.load.callback.err] Error object. If provided,
                the load action will be considered a failure, and an &#x60;error&#x60;
                event will be fired. Omit this argument (or set it to &#x60;null&#x60;) to
                indicate success.

@extends Plugin.Base
@constructor
**&#x2F;

&#x2F;**
Fired when the &#x60;load()&#x60; method indicates there was an error loading child nodes.

@event error
@param {Error} error Error provided by the &#x60;load()&#x60; method.
@param {String} src Source of the error (defaults to &quot;load&quot;).
**&#x2F;
var EVT_ERROR = &#x27;error&#x27;;

&#x2F;**
Fired after child nodes have finished loading and have been added to the tree.

@event loaded
@param {Tree.Node} node Tree node whose children have been loaded.
**&#x2F;
var EVT_LOADED  = &#x27;loaded&#x27;;

&#x2F;**
Fired just before the custom &#x60;load()&#x60; method is called to load child nodes for a
node.

Calling &#x60;preventDefault()&#x60; on this event&#x27;s facade will cancel the load action
and prevent the &#x60;load()&#x60; method from being called.

@event loading
@param {Tree.Node} node Tree node whose children will be loaded.
@preventable _defLoadingFn
**&#x2F;
var EVT_LOADING = &#x27;loading&#x27;;

Y.namespace(&#x27;Plugin.Tree&#x27;).Lazy = Y.Base.create(&#x27;lazyTreePlugin&#x27;, Y.Plugin.Base, [], {
    &#x2F;&#x2F; -- Lifecycle Methods ----------------------------------------------------
    initializer: function (config) {
        this._host = config.host;

        if (config.load) {
            this.load = config.load;
        }

        this._published = {};
        this._attachEvents();
    },

    &#x2F;&#x2F; -- Public Methods -------------------------------------------------------
    load: function (node, callback) {
        callback(new Error(&#x27;Plugin.Tree.Lazy: Please provide a custom &#x60;load&#x60; method when instantiating this plugin.&#x27;));
    },

    &#x2F;&#x2F; -- Protected Methods ----------------------------------------------------

    _attachEvents: function () {
        this.onHostEvent(&#x27;open&#x27;, this._onOpen);
    },

    &#x2F;&#x2F; -- Protected Event Handlers ---------------------------------------------

    _onOpen: function (e) {
        var node = e.node;

        &#x2F;&#x2F; Nothing to do if this node can&#x27;t have children or if its children
        &#x2F;&#x2F; have already been (or are already being) loaded.
        if (!node.canHaveChildren || node.state.loaded || node.state.loading) {
            return;
        }

        if (!this._published[EVT_LOADING]) {
            this._published[EVT_LOADING] = this.publish(EVT_LOADING, {
                defaultFn: this._defLoadingFn
            });
        }

        this.fire(EVT_LOADING, {node: node});
    },

    &#x2F;&#x2F; -- Default Event Handlers -----------------------------------------------

    _defLoadingFn: function (e) {
        var node = e.node,
            self = this;

        node.state.loading = true;

        this.load(node, function (err) {
            delete node.state.loading;

            if (err) {
                self.fire(EVT_ERROR, {
                    error: err,
                    src  : &#x27;load&#x27;
                });

                return;
            }

            node.state.loaded = true;

            self.fire(EVT_LOADED, {node: node});
        });
    }
}, {
    NS: &#x27;lazy&#x27;
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
